;/*FB_PKG_DELIM*/

__d("AdsOsmipChatSubmitNegativeFeedbackModal.react",["fbt","AdsAIMessengerConstants","AdsAIMessengerUtils","BotFeedbackKind","GeoBaseText.react","GeoButton.react","GeoFlexbox.react","GeoHeading.react","GeoModal.react","GeoModalFooter.react","GeoModalHeader.react","GeoRadioList.react","GeoRadioListItem.react","GeoText.react","GeoVStack.react","MWMessageListLoggingContext","MessengerWebUXLogger","geoMargin","react"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||(i=d("react"));b=i;var k=b.useCallback,l=b.useMemo,m=b.useState;function a(a){var b=a.isShown,e=a.message,f=a.onClose,g=a.onSubmit;a=m(c("BotFeedbackKind").BOT_FEEDBACK_NEGATIVE_GENERIC);var i=a[0],n=a[1],o=c("MessengerWebUXLogger").useInteractionLogger(),p=d("MWMessageListLoggingContext").useFlowInstanceId(),q=l(function(){var a;return{extraData:{botResponseId:(a=e.botResponseId)!=null?a:"",isShibaMessage:d("AdsAIMessengerUtils").isMessageFromAdsAIShibaBot(e).toString()},flowInstanceId:p.current}},[e,p]);a=k(function(){var a;g(i);f();o==null?void 0:o(babelHelpers["extends"]({eventName:(a=d("AdsAIMessengerConstants").BotFeedbackKindToLoggerEventMapping.get(i))!=null?a:"ads_ai_submit_negative_feedback_generic"},q))},[g,i,f,o,q]);return j.jsx(c("GeoModal.react"),{footer:j.jsx(c("GeoModalFooter.react"),{primaryButton:j.jsx(c("GeoButton.react"),{autoFocus:!0,isDisabled:i===c("BotFeedbackKind").BOT_FEEDBACK_NEGATIVE_GENERIC,label:h._("__JHASH__9K1MVcMecvv__JHASH__"),variant:"primary",onClick:a}),secondaryButton:j.jsx(c("GeoButton.react"),{label:h._("__JHASH__VT02sj-CMCR__JHASH__"),onClick:f})}),header:j.jsx(c("GeoModalHeader.react"),{heading:(a=d("AdsAIMessengerConstants")).feedbackModalHeader}),isShown:b,onHide:f,children:j.jsxs(c("GeoVStack.react"),{style:{marginLeft:16,width:400},children:[j.jsx(c("GeoText.react"),{children:a.feedbackModalText}),j.jsxs(c("GeoFlexbox.react"),{children:[j.jsx(c("GeoHeading.react"),{level:4,children:a.feedbackModalRadioItemsHeader1}),j.jsx(c("GeoBaseText.react"),{color:"placeholder",size:"header4",xstyle:c("geoMargin").start4,children:" \u2219 "}),j.jsx(c("GeoBaseText.react"),{color:"placeholder",size:"header4",xstyle:c("geoMargin").start4,children:a.feedbackModalRadioItemsHeader2})]}),j.jsx(c("GeoRadioList.react"),{isLabelHidden:!0,label:h._("__JHASH__zHXT15fJ3ba__JHASH__"),value:i,onChange:function(a){return n(Number(a))},children:a.FEEDBACK_OPTIONS_FOR_TEXT.map(function(a){return j.jsx(c("GeoRadioListItem.react"),{"data-radio-testid":a.title.toString(),"data-testid":void 0,label:a.title.toString(),value:a.value},a.title.toString())})})]})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),226);
__d("AdsOsmipChatMessageFeedbackButton.react",["fbt","ix","AdsAIMessengerUtils","AdsAddToastCardAction","AdsMessengerContext.react","AdsOsmipChatConstants.react","BotFeedbackKind","FDSIcon.react","GeoFlexbox.react","I64","JSResourceForInteraction","LSIntEnum","LSMailboxAIBotFeedbackSubmissionStatus","MWMessageListLoggingContext","MessengerWebUXLogger","ReQL","ReQLSuspense","fbicon","justknobx","lazyLoadComponent","react","useBoolean","useMWV2SubmitFeedbackAction","useMWXLazyDialog","useMWXPushToast","useReStore"],(function(a,b,c,d,e,f,g,h,i){"use strict";var j,k,l,m,n=m||(m=d("react"));b=m;var o=b.useCallback,p=b.useMemo;b.useState;var q={dislikeIcon:{transform:"x19jd1h0",$$css:!0},feedbackButton:{marginTop:"x1rhet7l",marginEnd:"x1hwekxz",marginBottom:"xwoyzhm",marginStart:"xnfveip",columnGap:"xfex06f",$$css:!0}},r=c("JSResourceForInteraction")("MWV2AdsAINegativeFeedbackDialog.react").__setRef("AdsOsmipChatMessageFeedbackButton.react"),s=c("lazyLoadComponent")(c("JSResourceForInteraction")("AdsOsmipChatSubmitNegativeFeedbackModal.react").__setRef("AdsOsmipChatMessageFeedbackButton.react"));function a(a){var b,e=a.message,g=e.botResponseId;a=d("AdsMessengerContext.react").useAdsMessengerContext();var m=a.isMessengerInAds,t=c("useMWXPushToast")();a=o(function(){return m?c("AdsAddToastCardAction").dispatch({toastCard:d("AdsOsmipChatConstants.react").feedbackSubmissionSuccessCard},{line:"83",module:"AdsOsmipChatMessageFeedbackButton.react.js",moduleID:f.id}):t({title:d("AdsOsmipChatConstants.react").feedbackSubmissionSuccessTitle})},[m,t]);var u=c("useMWV2SubmitFeedbackAction")(g),v=c("useMWV2SubmitFeedbackAction")(g,a);a=c("useBoolean")(!1);var w=a.value,x=a.setTrue;a=a.setFalse;var y=c("useMWXLazyDialog")(r),z=y[0],A=o(function(){return m?x():z({message:e,onSubmit:v})},[m,x,z,e,v]),B=c("MessengerWebUXLogger").useInteractionLogger(),C=d("MWMessageListLoggingContext").useFlowInstanceId(),D=p(function(){var a;return{extraData:{botResponseId:(a=g)!=null?a:"",isShibaMessage:d("AdsAIMessengerUtils").isMessageFromAdsAIShibaBot(e).toString()},flowInstanceId:C.current}},[g,C,e]);y=o(function(){v(c("BotFeedbackKind").BOT_FEEDBACK_POSITIVE),B==null?void 0:B(babelHelpers["extends"]({eventName:"ads_ai_submit_positive_feedback_generic"},D))},[D,B,v]);var E=o(function(){u(c("BotFeedbackKind").BOT_FEEDBACK_NEGATIVE_GENERIC),A(),B==null?void 0:B(babelHelpers["extends"]({eventName:"ads_ai_submit_negative_feedback_generic"},D))},[u,A,B,D]),F=(j||(j=c("useReStore")))(),G=d("ReQLSuspense").useFirst(function(){var a;return d("ReQL").fromTableDescending(F.tables.ai_bot_feedback_submission_status).getKeyRange((a=g)!=null?a:"")},[F,g],f.id+":153");b=(k||(k=d("I64"))).equal((b=G==null?void 0:G.feedbackSubmissionStatus)!=null?b:(k||(k=d("I64"))).neg_one,(l||(l=d("LSIntEnum"))).ofNumber(c("LSMailboxAIBotFeedbackSubmissionStatus").SUBMITTED));G=b&&(k||(k=d("I64"))).equal((G=G==null?void 0:G.feedbackKindType)!=null?G:(k||(k=d("I64"))).neg_one,(l||(l=d("LSIntEnum"))).ofNumber(c("BotFeedbackKind").BOT_FEEDBACK_POSITIVE));b=b&&!G;var H=!G&&!b,I=c("justknobx")._("2062");return!I||g==null?null:n.jsxs(c("GeoFlexbox.react"),{xstyle:H&&q.feedbackButton,children:[m&&n.jsx(s,{isShown:w,message:e,onClose:a,onSubmit:v}),H&&n.jsx(c("FDSIcon.react"),{"aria-label":h._("__JHASH__obrYq4A4MTx__JHASH__"),color:"tertiary",icon:G?d("fbicon")._(i("509921"),16):d("fbicon")._(i("509925"),16),onPress:y}),H&&n.jsx(c("FDSIcon.react"),{"aria-label":h._("__JHASH__XSpccoXfTwT__JHASH__"),color:"tertiary",icon:b?d("fbicon")._(i("509921"),16):d("fbicon")._(i("509925"),16),xstyle:q.dislikeIcon,onPress:E})]})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),226);