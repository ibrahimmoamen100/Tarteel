;/*FB_PKG_DELIM*/

__d("LSAnonymizedMsgrWebE2EEXmaReceiverFetchDispatchStoredProcedure",["LSAnonymizedMsgrWebE2EEXmaReceiverFetchDispatch","cr:8709"],(function(a,b,c,d,e,f,g){function a(a,b){var d=[];d[0]=b.messageId;d[1]=b.contentRef;return c("LSAnonymizedMsgrWebE2EEXmaReceiverFetchDispatch").apply(void 0,d.concat([a]))}g["default"]=a}),98);
__d("MAWChatFile.react",["MAWFilePressable.react","MWChatFilePreview.react","MWInboxInfoSharedContentQPLLogger","MWXTextPairing.react","react","stylex"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=i||d("react"),k={root:{alignItems:"x6s0dn4",display:"x78zum5",userSelect:"x87ps6o",$$css:!0}};function l(){d("MWInboxInfoSharedContentQPLLogger").logOpenSharedContentFromThread("files")}function a(a){var b=a.file,d=a.getFileUrl,e=a.mediaRenderQpl;a=a.renderUnsupportedAttachment;return j.jsx(c("MAWFilePressable.react"),{entrypoint:"chat_file_v4",file:b,getFileUrl:d,mediaRenderQpl:e,onPress:l,renderUnsupportedAttachment:a,testid:void 0,children:function(a){var d=a.filename;a=a.size;return j.jsxs("div",{className:(h||(h=c("stylex")))(k.root,!1),children:[j.jsx(c("MWChatFilePreview.react"),{attachment:b,withPreview:!1}),j.jsxs("div",{className:"xzsf02u x1iyjqo2 x1s688f xz9dl7a xn6708d xsag5q8 x1ye3gou x13faqbe",children:[j.jsx(c("MWXTextPairing.react"),{headline:d,headlineLineLimit:3,level:4}),j.jsx("div",{className:"x889kno",children:j.jsx(c("MWXTextPairing.react"),{body:a,bodyColor:"secondary",bodyLineLimit:1,level:4})})]})]})}})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MAWSecureAudioAttachmentContent.react",["CometPlaceholder.react","MWAudioPlayer.react","MWPAudioPlayerUtils","MWPMessageIsReply","MWV2AttachmentErrorPlaceholder.react","MWV2AttachmentLoadingPlaceholder.react","gkx","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){var b=a.connectBottom,e=a.connectTop,f=a.dbAttachment,g=a.getPlayableUrl,h=a.mediaRenderQpl,j=a.message,k=a.outgoing,l=d("MWPAudioPlayerUtils").useCalculatePlayerWidth(),m=d("MWPAudioPlayerUtils").useCalculatePlayerHeight(d("MWPAudioPlayerUtils").UseCase.PLAYER);if(c("gkx")("1445")&&f.hasMedia===!1){h==null?void 0:h.addPoint("loading_has_media_false");return i.jsx(c("MWV2AttachmentLoadingPlaceholder.react"),{connectBottom:b,connectTop:e,height:m,outgoing:k,width:l})}return c("gkx")("1445")?i.jsx(c("CometPlaceholder.react"),{fallback:i.jsx(c("MWV2AttachmentLoadingPlaceholder.react"),{connectBottom:b,connectTop:e,height:m,outgoing:k,width:l}),children:i.jsx(d("MWAudioPlayer.react").MWAudioPlayer,{attachment:f,connectBottom:b,connectTop:e,getPlayableUrl:g,isReply:c("MWPMessageIsReply")(j),mediaRenderQpl:h,message:j,outgoing:k,renderUnsupportedAttachment:function(){return i.jsx(c("MWV2AttachmentErrorPlaceholder.react"),{connectBottom:b,connectTop:e,height:m,outgoing:k,width:l})}})}):i.jsx(d("MWAudioPlayer.react").MWAudioPlayer,{attachment:f,connectBottom:b,connectTop:e,getPlayableUrl:g,isReply:c("MWPMessageIsReply")(j),mediaRenderQpl:h,message:j,outgoing:k})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MAWSecureFileAttachmentContent.react",["CometPlaceholder.react","MAWChatFile.react","MWV2AttachmentErrorPlaceholder.react","MWV2AttachmentLoadingPlaceholder.react","MWXMessageBubble.react","gkx","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react"),j=60,k=250,l={bubble:{paddingTop:"xexx8yu",paddingEnd:"x4uap5",paddingBottom:"x18d9i69",paddingStart:"xkhd6sd",$$css:!0}};function a(a){var b=a.connectBottom,d=a.connectTop,e=a.dbAttachment,f=a.getFileUrl,g=a.mediaRenderQpl,h=a.outgoing;if(c("gkx")("1445")&&e.hasMedia===!1){g==null?void 0:g.addPoint("loading_has_media_false");return i.jsx(c("MWV2AttachmentLoadingPlaceholder.react"),{connectBottom:b,connectTop:d,height:j,outgoing:h,width:k})}return c("gkx")("1445")?i.jsx(c("CometPlaceholder.react"),{fallback:i.jsx(c("MWV2AttachmentLoadingPlaceholder.react"),{connectBottom:b,connectTop:d,height:j,outgoing:h,width:k}),children:i.jsx(c("MWXMessageBubble.react"),{align:h?"right":"left",color:"incoming",connectBottom:b,connectTop:d,xstyle:l.bubble,children:i.jsx(c("MAWChatFile.react"),{file:e,getFileUrl:f,mediaRenderQpl:g,renderUnsupportedAttachment:function(){return i.jsx(c("MWV2AttachmentErrorPlaceholder.react"),{connectBottom:b,connectTop:d,height:j,outgoing:h,width:k})}})})}):i.jsx(c("MWXMessageBubble.react"),{align:h?"right":"left",color:"incoming",connectBottom:b,connectTop:d,xstyle:l.bubble,children:i.jsx(c("MAWChatFile.react"),{file:e,mediaRenderQpl:g})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MAWSecureImageAttachmentContent.react",["CometPlaceholder.react","MWV2AttachmentErrorPlaceholder.react","MWV2AttachmentLoadingPlaceholder.react","MWV2ChatImage.react","gkx","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){var b=a.connectBottom,d=a.connectTop,e=a.dbAttachment,f=a.getPlayableUrl,g=a.getPreviewUrl,h=a.mediaRenderQpl,j=a.message,k=a.outgoing,l=a.previewHeight,m=a.previewWidth;if(c("gkx")("1445")&&e.hasMedia===!1){h==null?void 0:h.addPoint("loading_has_media_false");return i.jsx(c("MWV2AttachmentLoadingPlaceholder.react"),{connectBottom:b,connectTop:d,hasAppAttribution:e.attributionAppName!=null,height:l,outgoing:k,width:m})}return i.jsx(c("CometPlaceholder.react"),{fallback:i.jsx(c("MWV2AttachmentLoadingPlaceholder.react"),{connectBottom:b,connectTop:d,hasAppAttribution:e.attributionAppName!=null,height:l,outgoing:k,width:m}),children:i.jsx(c("MWV2ChatImage.react"),{attachment:e,connectBottom:b,connectTop:d,getPlayableUrl:f,getPreviewUrl:g,isSecureThread:!0,mediaRenderQpl:h,message:j,navigateToRouteForMediaViewer:!1,outgoing:k,renderUnsupportedAttachment:c("gkx")("1445")?function(){return i.jsx(c("MWV2AttachmentErrorPlaceholder.react"),{connectBottom:b,connectTop:d,hasAppAttribution:e.attributionAppName!=null,height:l,outgoing:k,width:m})}:void 0})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MAWSecureStickerAttachmentContent.react",["CometPlaceholder.react","MWV2AttachmentErrorPlaceholder.react","MWV2AttachmentLoadingPlaceholder.react","MWV2Sticker.react","gkx","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){var b=a.connectBottom,d=a.connectTop,e=a.dbAttachment,f=a.getPreviewUrl,g=a.mediaRenderQpl,h=a.outgoing,j=a.previewHeight,k=a.previewWidth;if(c("gkx")("1445")&&e.hasMedia===!1){g==null?void 0:g.addPoint("loading_has_media_false");return i.jsx(c("MWV2AttachmentLoadingPlaceholder.react"),{connectBottom:b,connectTop:d,hasAppAttribution:e.attributionAppName!=null,height:j,outgoing:h,width:k})}return c("gkx")("1445")?i.jsx(c("CometPlaceholder.react"),{fallback:i.jsx(c("MWV2AttachmentLoadingPlaceholder.react"),{connectBottom:b,connectTop:d,hasAppAttribution:e.attributionAppName!=null,height:j,outgoing:h,width:k}),children:i.jsx(c("MWV2Sticker.react"),{attachment:e,getPreviewUrl:f,mediaRenderQpl:g,renderUnsupportedAttachment:function(){return i.jsx(c("MWV2AttachmentErrorPlaceholder.react"),{connectBottom:b,connectTop:d,hasAppAttribution:e.attributionAppName!=null,height:j,outgoing:h,width:k})}})}):i.jsx(c("MWV2Sticker.react"),{attachment:e,getPreviewUrl:f,mediaRenderQpl:g})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MAWSecureVideoAttachmentContent.react",["CometPlaceholder.react","I64","LSAuthorityLevel","LSIntEnum","MWV2AttachmentErrorPlaceholder.react","MWV2AttachmentLoadingPlaceholder.react","MWV2ChatVideo.react","gkx","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k=h||d("react");function a(a){var b=a.connectBottom,e=a.connectTop,f=a.dbAttachment,g=a.getPreviewUrl,h=a.mediaRenderQpl,l=a.message,m=a.outgoing,n=a.previewHeight,o=a.previewWidth;if(c("gkx")("1445")&&f.hasMedia===!1){h==null?void 0:h.addPoint("loading_has_media_false");return k.jsx(c("MWV2AttachmentLoadingPlaceholder.react"),{connectBottom:b,connectTop:e,hasAppAttribution:f.attributionAppName!=null,height:n,outgoing:m,width:o})}return k.jsx(c("CometPlaceholder.react"),{fallback:k.jsx(c("MWV2AttachmentLoadingPlaceholder.react"),{connectBottom:b,connectTop:e,hasAppAttribution:f.attributionAppName!=null,height:n,outgoing:m,width:o}),children:k.jsx(c("MWV2ChatVideo.react"),{attachment:f,autoPlaySetting:(i||(i=d("I64"))).le(l.authorityLevel,(j||(j=d("LSIntEnum"))).ofNumber(c("LSAuthorityLevel").OPTIMISTIC))?"off":void 0,connectTop:e,getPreviewUrl:g,mediaRenderQpl:h,message:l,navigateToRouteForMediaViewer:!1,outgoing:m,renderUnsupportedAttachment:c("gkx")("1445")?function(){return k.jsx(c("MWV2AttachmentErrorPlaceholder.react"),{connectBottom:b,connectTop:e,hasAppAttribution:f.attributionAppName!=null,height:n,outgoing:m,width:o})}:void 0})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MAWSecureXMAAttachmentContent.react",["LSMediaUrlAttachment","MAWAttachmentBlob.react","MWXMAAttachment.react","gkx","isReceiverFetchReceivingEnabled","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){var b=a.connectBottom,e=a.connectTop,f=a.dbAttachment,g=a.hasText,h=a.mediaRenderQpl;a=a.outgoing;return i.jsx(d("MWXMAAttachment.react").MWXMAAttachment,{attachment:f,connectBottom:b,connectTop:e,getFaviconUrlXMA:function(a,b){if(a.faviconUrl!=null&&c("isReceiverFetchReceivingEnabled")())return d("LSMediaUrlAttachment").faviconUrl(a);if(c("gkx")("3707"))return a.hasXmaFavicon===!0?d("MAWAttachmentBlob.react").getInfoUrlXMA(a,"favicon","MAWSecureXMAAttachmentContent - getFaviconUrlXMA",h):void 0;else return d("MAWAttachmentBlob.react").getInfoUrlXMA(a,"favicon","MAWSecureXMAAttachmentContent - getFaviconUrlXMA",h)},getHeaderUrlXMA:function(a){if(a.headerImageUrl!=null&&c("isReceiverFetchReceivingEnabled")())return d("LSMediaUrlAttachment").headerImageUrl(a);if(c("gkx")("3707"))if(a.hasXmaHeaderImage===!0)return d("MAWAttachmentBlob.react").getInfoUrlXMA(a,"header","MAWSecureXMAAttachmentContent - getHeaderUrlXMA",h);else return void 0;else return d("MAWAttachmentBlob.react").getInfoUrlXMA(a,"header","MAWSecureXMAAttachmentContent - getHeaderUrlXMA",h)},getPlayableUrl:function(a,b){if(c("gkx")("3707"))if(a.hasXmaPreview===!0)return d("MAWAttachmentBlob.react").getInfoUrlXMA(a,"preview","MAWSecureXMAAttachmentContent - getPlayableUrl",h);else return void 0;else return d("MAWAttachmentBlob.react").getInfoUrlXMA(a,"preview","MAWSecureXMAAttachmentContent - getPlayableUrl",h)},getPreviewUrlXMA:function(a,b){if(a.previewUrl!=null&&c("isReceiverFetchReceivingEnabled")())return d("LSMediaUrlAttachment").previewUrl(a);if(c("gkx")("3707"))if(a.hasXmaPreview===!0)return d("MAWAttachmentBlob.react").getInfoUrlXMA(a,"preview","MAWSecureXMAAttachmentContent - getPreviewUrlXMA",h);else return void 0;else return d("MAWAttachmentBlob.react").getInfoUrlXMA(a,"preview","MAWSecureXMAAttachmentContent - getPreviewUrlXMA",h)},hasText:g,mediaRenderQpl:h,outgoing:a})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("useIssueReceiverFetchTask",["FBLogger","Int64Hooks","LSAnonymizedMsgrWebE2EEXmaReceiverFetchDispatchStoredProcedure","LSFactory","LSIntEnum","LSXmaContentType","MAWReceiverFetchQPLLogger","Promise","promiseDone","react","useAsyncReStore","useXMAPreviewsDisabledSetting"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k=(j||d("react")).useRef;function l(a,e,g){if(g==null)return(h||(h=b("Promise"))).resolve();d("MAWReceiverFetchQPLLogger").logFetchStart(e);return a.runInTransaction(function(a){return c("LSAnonymizedMsgrWebE2EEXmaReceiverFetchDispatchStoredProcedure")(c("LSFactory")(a),{contentRef:g,messageId:e})},"readwrite",void 0,void 0,f.id+":36")}function a(a,b,e){var f=c("useAsyncReStore")(),g=c("useXMAPreviewsDisabledSetting")(),h=k(!1);d("Int64Hooks").useEffectInt64(function(){if(e==null||(i||(i=d("LSIntEnum"))).toNumber(e)!==c("LSXmaContentType").MSG_RECEIVER_FETCH||g||h.current)return;h.current=!0;c("promiseDone")(f,function(c){return l(c,a,b)},function(a){return c("FBLogger")("messenger_web_sharing").catching(a).warn("Failed to issue receiver fetch task on mount")})},[f,a,b,g,e])}g["default"]=a}),98);
__d("MAWSecureAttachment.react",["I64","LSAuthorityLevel","LSIntEnum","MAWAttachmentBlob.react","MAWGetAttachmentThumbnailBlob","MAWSecureAudioAttachmentContent.react","MAWSecureFileAttachmentContent.react","MAWSecureImageAttachmentContent.react","MAWSecureStickerAttachmentContent.react","MAWSecureVideoAttachmentContent.react","MAWSecureXMAAttachmentContent.react","MWChatBubbleEmphasisRing.react","MWPMessageListAttachmentContainer.react","MWV2AttachmentLoadingPlaceholder.react","MessagingAttachmentType","ReQL","ReQLSuspense","react","useIssueReceiverFetchTask","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k,l=i||(i=d("react"));b=i;var m=b.useEffect,n=b.useMemo;function o(a){var b=a.dbAttachment,e=a.connectBottom,f=a.connectTop,g=a.hasText,h=a.mediaRenderQpl,i=a.message;a=a.outgoing;var m=b.attachmentFbid,n=b.attachmentType,o=b.authorityLevel,p=b.previewHeight!=null?(j||(j=d("I64"))).to_float(b.previewHeight):b.previewHeightLarge!=null?(j||(j=d("I64"))).to_float(b.previewHeightLarge):void 0,q=b.previewWidth!=null?(j||(j=d("I64"))).to_float(b.previewWidth):b.previewWidthLarge!=null?(j||(j=d("I64"))).to_float(b.previewWidthLarge):void 0;switch(!0){case m===(j||(j=d("I64"))).to_string((j||(j=d("I64"))).max_int)&&(j||(j=d("I64"))).equal(o,(k||(k=d("LSIntEnum"))).ofNumber(c("LSAuthorityLevel").OPTIMISTIC)):h==null?void 0:h.addPoint("loading_eb_frontloading");return l.jsx(c("MWV2AttachmentLoadingPlaceholder.react"),{connectBottom:e,connectTop:f,hasAppAttribution:b.attributionAppName!=null,height:p,outgoing:a,width:q});case(j||(j=d("I64"))).equal(n,(k||(k=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").IMAGE)):return l.jsx(c("MAWSecureImageAttachmentContent.react"),{connectBottom:e,connectTop:f,dbAttachment:b,getPlayableUrl:d("MAWAttachmentBlob.react").getAttachmentBlob,getPreviewUrl:c("MAWGetAttachmentThumbnailBlob"),mediaRenderQpl:h,message:i,outgoing:a,previewHeight:p,previewWidth:q});case(j||(j=d("I64"))).equal(n,(k||(k=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").VIDEO)):return l.jsx(c("MAWSecureVideoAttachmentContent.react"),{connectBottom:e,connectTop:f,dbAttachment:b,getPreviewUrl:d("MAWAttachmentBlob.react").getAttachmentBlob,mediaRenderQpl:h,message:i,outgoing:a,previewHeight:p,previewWidth:q});case(j||(j=d("I64"))).equal(n,(k||(k=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").AUDIO)):return l.jsx(c("MAWSecureAudioAttachmentContent.react"),{connectBottom:e,connectTop:f,dbAttachment:b,getPlayableUrl:d("MAWAttachmentBlob.react").getAttachmentBlob,mediaRenderQpl:h,message:i,outgoing:a});case(j||(j=d("I64"))).equal(n,(k||(k=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").ANIMATED_IMAGE)):return l.jsx(c("MAWSecureImageAttachmentContent.react"),{connectBottom:e,connectTop:f,dbAttachment:b,getPlayableUrl:d("MAWAttachmentBlob.react").getAttachmentBlob,getPreviewUrl:d("MAWAttachmentBlob.react").getAttachmentBlob,mediaRenderQpl:h,message:i,outgoing:a,previewHeight:p,previewWidth:q});case(j||(j=d("I64"))).equal(n,(k||(k=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").STICKER)):return l.jsx(c("MAWSecureStickerAttachmentContent.react"),{connectBottom:e,connectTop:f,dbAttachment:b,getPreviewUrl:d("MAWAttachmentBlob.react").getAttachmentBlob,mediaRenderQpl:h,outgoing:a,previewHeight:p,previewWidth:q});case(j||(j=d("I64"))).equal(n,(k||(k=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").XMA)):return l.jsx(c("MAWSecureXMAAttachmentContent.react"),{connectBottom:e,connectTop:f,dbAttachment:b,hasText:g,mediaRenderQpl:h,outgoing:a});case(j||(j=d("I64"))).equal(n,(k||(k=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").FILE)):return l.jsx(c("MAWSecureFileAttachmentContent.react"),{connectBottom:e,connectTop:f,dbAttachment:b,getFileUrl:d("MAWAttachmentBlob.react").getAttachmentBlob,mediaRenderQpl:h,outgoing:a});default:return"Unsupported attachment type"}}o.displayName=o.name+" [from "+f.id+"]";function a(a){var b=a.connectBottom,e=a.connectTop,g=a.hasEmphasisRing,i=a.hasText,p=a.mediaRenderQpl,q=a.message,r=a.outgoing,s=(h||(h=c("useReStore")))();a=q.authorityLevel;var t=q.messageId,u=q.threadKey,v=d("ReQLSuspense").useFirst(function(){return d("ReQL").fromTableAscending(s.tables.attachments).getKeyRange(u,t)},[s,t,u,a],f.id+":215");c("useIssueReceiverFetchTask")(q.messageId,q.xmaReceiverFetchParams,v==null?void 0:v.xmaContentType);a=n(function(){return g===!0?function(a,b){return l.jsx(c("MWChatBubbleEmphasisRing.react"),{connectBottom:!1,connectTop:e,hasXMA:a,outgoing:r,precedesXMA:!1,children:b})}:void 0},[e,g,r]);m(function(){p==null?void 0:p.addAttachmentAnnotations(v)},[p,v]);return v==null?null:l.jsx(c("MWPMessageListAttachmentContainer.react"),{connectTop:e,message:q,paint:(j||(j=d("I64"))).equal(v.attachmentType,(k||(k=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").AUDIO))?!1:void 0,renderEmphasisRing:a,children:l.jsx(o,{connectBottom:b,connectTop:e,dbAttachment:v,hasText:i,mediaRenderQpl:p,message:q,outgoing:r})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MAWUnavailablePlaceholder.react",["fbt","MWV2TombstonedMessage.react","gkx","react"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||d("react");function a(){return j.jsx(c("MWV2TombstonedMessage.react"),{children:c("gkx")("2161")?h._("__JHASH__bLtIFgZUFni__JHASH__"):h._("__JHASH__M9fzIhDqITQ__JHASH__")})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),226);
__d("MAWUnavailableStoryPlaceholder.react",["fbt","MWV2TombstonedMessage.react","react"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||d("react");function a(){return j.jsx(c("MWV2TombstonedMessage.react"),{children:h._("__JHASH__pGZ-I0iz-G0__JHASH__")})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),226);
__d("MAWSecurePlaceholderTombstone.react",["MAWUnavailablePlaceholder.react","MAWUnavailableStoryPlaceholder.react","ReQL","ReQLSuspense","react","recoverableViolation","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=i||d("react");function k(a){var b=(h||(h=c("useReStore")))();return d("ReQLSuspense").useFirst(function(){return d("ReQL").fromTableAscending(b.tables.attachments).getKeyRange(a.threadKey,a.messageId)},[b,a.threadKey,a.messageId],f.id+":25")}function a(a){a=a.message;a=a;a=k(a);if(a==null)return null;a=a.defaultCtaType;if(a==="xma_montage_share")return j.jsx(c("MAWUnavailableStoryPlaceholder.react"),{});c("recoverableViolation")("Unexpected case where message is tombstone type but the attachment is not xma montage share","messenger_web_sharing");return j.jsx(c("MAWUnavailablePlaceholder.react"),{})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MAWSecurePlaceholder.react",["I64","LSIntEnum","MAWLocalizationType","MAWSecurePlaceholderTombstone.react","MAWUnavailablePlaceholder.react","MWPMessageListColumn.react","MWV2TombstonedMessage.react","getMAWLocalizedFallbackMsgSnippet","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k=h||d("react");function l(a){var b=a.actorId;a=a.message;var e=a.displayedContentTypes,f=a.senderId;f=(i||(i=d("I64"))).equal(f,b);if((i||(i=d("I64"))).equal(e,(j||(j=d("LSIntEnum"))).ofNumber(65536)))return k.jsx(c("MWV2TombstonedMessage.react"),{children:c("getMAWLocalizedFallbackMsgSnippet")(d("MAWLocalizationType").LOCALIZATION_TYPE.USER_SEND_ENCRYPTED_MESSAGE)});if((i||(i=d("I64"))).equal(e,(j||(j=d("LSIntEnum"))).ofNumber(131072)))return k.jsx(c("MWV2TombstonedMessage.react"),{children:c("getMAWLocalizedFallbackMsgSnippet")(f?d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_SEND_UNRENDERABLE_MESSAGE:d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_SEND_UNRENDERABLE_MESSAGE)});if((i||(i=d("I64"))).equal(e,(j||(j=d("LSIntEnum"))).ofNumber(524288)))return k.jsx(c("MWV2TombstonedMessage.react"),{children:c("getMAWLocalizedFallbackMsgSnippet")(f?d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_SEND_LOCATION:d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_SEND_LOCATION)});if((i||(i=d("I64"))).equal(e,(j||(j=d("LSIntEnum"))).ofNumber(1048576)))return k.jsx(c("MWV2TombstonedMessage.react"),{children:c("getMAWLocalizedFallbackMsgSnippet")(f?d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_SEND_POLL_CREATION:d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_SEND_POLL_CREATION)});if((i||(i=d("I64"))).equal(e,(j||(j=d("LSIntEnum"))).ofNumber(2097152)))return k.jsx(c("MWV2TombstonedMessage.react"),{children:c("getMAWLocalizedFallbackMsgSnippet")(f?d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_SEND_CONTACT_SHARE:d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_SEND_CONTACT_SHARE)});if((i||(i=d("I64"))).equal(e,(j||(j=d("LSIntEnum"))).ofNumber(4194304)))return k.jsx(c("MWV2TombstonedMessage.react"),{children:c("getMAWLocalizedFallbackMsgSnippet")(f?d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_SEND_STORY_MENTION:d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_SEND_STORY_MENTION)});if((i||(i=d("I64"))).equal(e,(j||(j=d("LSIntEnum"))).ofNumber(8388608)))return k.jsx(c("MWV2TombstonedMessage.react"),{children:c("getMAWLocalizedFallbackMsgSnippet")(d("MAWLocalizationType").LOCALIZATION_TYPE.META_AI_SEND_MESSAGE)});if((i||(i=d("I64"))).equal(e,(j||(j=d("LSIntEnum"))).ofNumber(16777216)))return k.jsx(c("MWV2TombstonedMessage.react"),{children:c("getMAWLocalizedFallbackMsgSnippet")(f?d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_SEND_BUMP_MESSAGE:d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_SEND_BUMP_MESSAGE)});if((i||(i=d("I64"))).equal(e,(j||(j=d("LSIntEnum"))).ofNumber(262144)))return k.jsx(c("MAWUnavailablePlaceholder.react"),{});if((i||(i=d("I64"))).equal(e,(j||(j=d("LSIntEnum"))).ofNumber(256)))return k.jsx(c("MAWSecurePlaceholderTombstone.react"),{message:a});return(i||(i=d("I64"))).equal(e,(j||(j=d("LSIntEnum"))).ofNumber(33554432))?k.jsx(c("MWV2TombstonedMessage.react"),{children:c("getMAWLocalizedFallbackMsgSnippet")(d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_SEND_BUMP_MESSAGE_ORIGINAL_UNAVAILABLE)}):null}l.displayName=l.name+" [from "+f.id+"]";function a(a){var b=a.actorId;a=a.message;return k.jsxs(d("MWPMessageListColumn.react").MWPMessageListColumnShrinkwrap,{children:[k.jsx("div",{className:"x1eb86dx x36qwtl xh8yej3"}),k.jsx(l,{actorId:b,message:a})]})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("useMediaRenderQpl",["I64","LSAuthorityLevel","LSIntEnum","MAWMsg","MWMediaRenderQplUtils","MWPActor.react","QPLUserFlow","Random","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j;b=h||d("react");var k=b.useEffect,l=b.useMemo,m=b.useRef;function a(a,b){var e=m(),f=m(),g=(i||(i=d("I64"))).le(a.authorityLevel,(j||(j=d("LSIntEnum"))).ofNumber(c("LSAuthorityLevel").OPTIMISTIC)),h=d("MWPActor.react").useActor(),p=i.equal(a.senderId,h);k(function(){return function(){e.current!=null&&f.current!==e.current&&c("QPLUserFlow").endCancel(d("MWMediaRenderQplUtils").event,{instanceKey:e.current})}},[]);h=l(function(){if(!n(a))return null;var h=o();e.current=h;c("QPLUserFlow").start(d("MWMediaRenderQplUtils").event,{annotations:{bool:{is_optimistic:g,is_outgoing:p},string:{content_type:d("MWMediaRenderQplUtils").getMessageContentTypeString(a),entry_point:"thread_view",thread_type:d("MWMediaRenderQplUtils").getThreadTypeString(b),transport_key:a.transportKey}},cancelOnUnload:!0,instanceKey:h,timeoutInMs:d("MWMediaRenderQplUtils").QPL_TIMEOUT});return babelHelpers["extends"]({},d("MWMediaRenderQplUtils").createQplFlowCommon(d("MWMediaRenderQplUtils").event,h,f),{addAttachmentAnnotations:function(a){c("QPLUserFlow").addAnnotations(d("MWMediaRenderQplUtils").event,{bool:{has_db_attachment:a!=null},string:{attachment_type:a==null?null:d("MWMediaRenderQplUtils").getAttachmentTypeString(a)}},{instanceKey:h}),(a==null?void 0:a.xmaContentType)!=null&&c("QPLUserFlow").addAnnotations(d("MWMediaRenderQplUtils").event,{string:{xma_content_type:d("MWMediaRenderQplUtils").getXmaContentTypeStringFromEnum(a.xmaContentType)}},{instanceKey:h})}})},[g]);return h}function n(a){return d("MAWMsg").isXMAMsg(a)||d("MAWMsg").isMediaMsg(a)}function o(){return Date.now()+Math.round(d("Random").random()*1e4)}g["default"]=a}),98);
__d("MAWSecureAttachmentRenderer.react",["CometPlaceholder.react","MAWMsg","MAWSecureAttachment.react","MAWSecurePlaceholder.react","MWPActor.react","MWPMessageParsingUtils","react","useMediaRenderQpl"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react")),j=h.useCallback;function k(a,b,e,f,g,h,j,k){b=d("MWPMessageParsingUtils").MessageWithAttachments.shouldConnectTop(a,b,"below");e=d("MWPMessageParsingUtils").MessageWithAttachments.shouldConnectBottom(a,e,"below");return i.jsx(c("CometPlaceholder.react"),{fallback:null,children:d("MAWMsg").isMediaMsg(a)||d("MAWMsg").isXMAMsg(a)?i.jsx(c("MAWSecureAttachment.react"),{connectBottom:e,connectTop:b,hasEmphasisRing:k,hasText:h,mediaRenderQpl:g,message:a,outgoing:f}):i.jsx(c("MAWSecurePlaceholder.react"),{actorId:j,message:a})})}k.displayName=k.name+" [from "+f.id+"]";function a(a,b,e){var f=d("MWPActor.react").useActor(),g=c("useMediaRenderQpl")(a,b);a=j(function(a,b,c,d,h){return k(a,b,c,d,g,h,f,e)},[f,e,g]);return a}g.render=k;g.useRenderAttachmentWithQpl=a}),98);
__d("useGetMediaGroupInformation",["I64","ReQL","ReQLSuspense","qex","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function a(a,b){var e=(i||(i=c("useReStore")))(),g=a.groupId,j=a.groupIndex,k=a.groupSize;a=d("ReQLSuspense").useArray(function(){return c("qex")._("1113")===!1||!b||g==null||j==null||k==null?d("ReQL").empty():d("ReQL").fromTableDescending(e.tables.messages.index("messageGroupId")).getKeyRange(g)},[e,g,b,j,k],f.id+":32");if(a.length===0)return null;a=Math.min.apply(Math,a.map(function(a){return(h||(h=d("I64"))).to_int32((a=a.groupIndex)!=null?a:(h||(h=d("I64"))).zero)}));return{groupId:g,groupIndex:j!=null?(h||(h=d("I64"))).to_int32(j):null,groupSize:k!=null?(h||(h=d("I64"))).to_int32(k):null,isFirstMediaMessageInGroup:j!=null&&(h||(h=d("I64"))).to_int32(j)===a}}g.useGetMediaGroupInformation=a}),98);
__d("MAWMessageListRow.react",["I64","Int64Hooks","LSMessagingThreadTypeUtil","MAWSecureAttachmentRenderer.react","MWMessageRow.react","MWPVisibleMessageContext.react","MWV2MessageActionsVisibility.react","react","useGetMediaGroupInformation"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=h||d("react");function a(a){var b=a.domElementRef,c=a.lastEbMessageTime,e=a.modal,f=a.row,g=a.thread;a=d("MWV2MessageActionsVisibility.react").useStopHoveringRef();var h=d("LSMessagingThreadTypeUtil").isArmadilloSecure(g.threadType),k=d("MWPVisibleMessageContext.react").useMWPVisibleMessageContext();k=k.visibleMessage;var l=f.message;h=h?(i||(i=d("I64"))).equal(g.threadKey,l.threadKey):!1;var m=!1;if(k!=null){var n=k.messageId;switch(k.source){case"Reply":case"Pinned":m=n===l.messageId;break;default:m=!1}}k=d("MAWSecureAttachmentRenderer.react").useRenderAttachmentWithQpl(l,g,m);n=d("Int64Hooks").useMemoInt64(function(){return g.threadType},[g.threadType]);var o=d("useGetMediaGroupInformation").useGetMediaGroupInformation(l,h);if((o==null?void 0:o.groupId)!=null&&(o==null?void 0:o.isFirstMediaMessageInGroup)===!1)return null;o={containerThreadKey:g.threadKey,domElementRef:b,hasMessageEmphasisRing:m,isModal:e===l.messageId,isSecureMessage:h,lastEbMessageTime:c,message:l,nextMessage:f.nextMessage,prevMessage:f.prevMessage,renderAttachment:k,stopHoveringRef:a,threadType:n};return j.jsx(d("MWMessageRow.react").MWMessageRow,babelHelpers["extends"]({},o))}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);